import{useEffect as t}from"react";function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function o(t,e){return t(e={exports:{}},e.exports),e.exports}var n=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return{top:t?o(t.marginTop):0,right:t?o(t.marginRight):0,bottom:t?o(t.marginBottom):0,left:t?o(t.marginLeft):0}};var o=function(t){return parseInt(t)||0};t.exports=e.default}));e(n);var r=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var o,n,i,u=t.parentNode,l=document.createElement("div"),a=t.cloneNode(!0),d=getComputedStyle(t);l.style.height=0,l.style.overflow="hidden",a.setAttribute("id",""),a.setAttribute("name",""),(e.display||d&&"none"===d.getPropertyValue("display"))&&(a.style.display=e.display||"block");(e.width||d&&!parseInt(d.getPropertyValue("width")))&&(a.style.width=e.width||"auto");(e.height||d&&!parseInt(d.getPropertyValue("height")))&&(a.style.height=e.height||"auto");return l.appendChild(a),u.appendChild(l),o=a.getBoundingClientRect(),n=a.offsetWidth,i=a.offsetHeight,u.removeChild(l),{rect:{width:n,height:i,top:o.top,right:o.right,bottom:o.bottom,left:o.left},margin:(0,r.default)(d)}};var o,r=(o=n)&&o.__esModule?o:{default:o};t.exports=e.default}));e(r);var i=e(o((function(t,e){function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=t.getBoundingClientRect(),n=void 0,r=void 0,l=void 0;if(o.width&&o.height&&!e.clone)e.margin&&(l=(0,u.default)(getComputedStyle(t)));else{var a=(0,i.default)(t,e);o=a.rect,l=a.margin}e.margin?(n=l.left+o.width+l.right,r=l.top+o.height+l.bottom):(n=o.width,r=o.height);return{width:n,height:r,top:o.top,right:o.right,bottom:o.bottom,left:o.left}};var i=o(r),u=o(n);t.exports=e.default}))),u=function(t){return"object"==typeof t&&!function(t){return null===t}(t)&&!Array.isArray(t)},l=function(t){return"function"==typeof t},a=function(){var t=window,e=!1,o=!1,n=function(t){},r=n,i=function(){return o?t.scrollTop:window.pageYOffset||document.documentElement.scrollTop},l=function(){var t=i();r(t),e=!1},a=function(){e||(setTimeout(l,50),e=!0)};return{init:function(e){var n=e.element,i=e.immediate,d=void 0!==i&&i,f=e.onScroll;return r=f,(o=u(n))&&(t=n),d&&l(),t.addEventListener("scroll",a),this},destroy:function(){return t.removeEventListener("scroll",a),r=n,this}}},d=t,f=function(t){var e=t.children,o=t.scrollTarget,n=t.debounceDelay,r=t.gutter,f=t.immediate,c=t.active,h=t.hasMore,s=t.shouldLoadMore,g=t.onLoadMore,p=u(o);return d((function(){var t,e,u,d,m=null,v=null;if(c){void 0===d&&(d=7),t=Math.random().toString(35).substr(2,d),e=n,u={},m=function(o){u[t]&&clearTimeout(u[t]),u[t]=setTimeout(o,e)};var y={element:o,immediate:f,onScroll:function(t){var e=function(){return function(t){var e=p?i(o).height:window.innerHeight,n=p?o.scrollHeight:document.body.clientHeight;h&&s(e,t,r,n)&&g()}(t)};l(m)?m(e):e()}};v=a().init(y)}return function(){l(m)&&(m=null,v.destroy(),v=null)}}),[e,c]),e};f.defaultProps={scrollTarget:null,debounceDelay:300,gutter:10,immediate:!1,active:!0,hasMore:!1,shouldLoadMore:function(t,e,o,n){return t+e+o>=n}};export default f;
